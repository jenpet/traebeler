build:
  command: |
    pushd {{ .codeDir }} >/dev/null
    go build -o {{ .robo.path }}/{{ .binary }} ./cmd/traebeler
    popd >/dev/null

run:
  command: |
    source .env
    robo -c {{ .robo.file }} build && \
    ./{{ .binary }}

test:
  command: |
    pushd {{ .codeDir }} >/dev/null
    go test ./... -cover
    popd >/dev/null

variables:
  project: github.com/jenpet/traebeler
  binary: build/dist/traebeler
  codeDir: ./internal